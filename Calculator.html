<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Premium Modern Calculator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@500;700&family=Outfit:wght@300;400;600;700&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Outfit', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                    },
                    colors: {
                        brand: {
                            dark: '#0f172a', // Deep slate blue-grey
                            surface: '#1e293b',
                            accent: '#3b82f6', // Vibrant blue
                            operator: '#f59e0b', // Amber/Orange
                            clear: '#ef4444', // Red
                            number: '#334155',
                            parentheses: '#475569',
                            text: '#f8fafc',
                            muted: '#94a3b8'
                        }
                    },
                    boxShadow: {
                        'premium': '0 25px 50px -12px rgba(0, 0, 0, 0.5), 0 0 20px rgba(59, 130, 246, 0.1)',
                        'inner-glow': 'inset 0 2px 4px 0 rgba(255, 255, 255, 0.05)',
                    }
                }
            }
        }
    </script>
    <style>
        body {
            background: radial-gradient(circle at center, #1e293b 0%, #0f172a 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0;
            overflow: hidden;
        }

        .calc-button {
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            user-select: none;
            touch-action: manipulation;
        }

        .calc-button:active {
            transform: scale(0.92);
            filter: brightness(1.2);
        }

        .calc-button::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 5px;
            height: 5px;
            background: rgba(255, 255, 255, 0.3);
            opacity: 0;
            border-radius: 100%;
            transform: scale(1, 1) translate(-50%);
            transform-origin: 50% 50%;
        }

        .calc-button:active::after {
            animation: ripple 0.4s ease-out;
        }

        @keyframes ripple {
            0% { transform: scale(0, 0); opacity: 0.5; }
            100% { transform: scale(40, 40); opacity: 0; }
        }

        /* Glassmorphism effects */
        .glass-panel {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .display-container {
            position: relative;
        }

        .display-container::before {
            content: '';
            position: absolute;
            inset: -2px;
            border-radius: 14px;
            background: linear-gradient(45deg, transparent, #3b82f6, transparent);
            opacity: 0.3;
            z-index: -1;
        }

        /* Custom Scrollbar for history if it gets long */
        .history-scroll::-webkit-scrollbar {
            height: 2px;
        }
        .history-scroll::-webkit-scrollbar-thumb {
            background: #475569;
            border-radius: 10px;
        }
    </style>
</head>
<body class="p-4 font-sans text-brand-text">

    <div class="w-full max-w-[400px] glass-panel rounded-[2rem] p-6 shadow-premium animate-in fade-in zoom-in duration-500">
        
        <!-- Header Info (Visual Only) -->
        <div class="flex justify-between items-center mb-6 px-2">
            <div class="flex space-x-1.5">
                <div class="w-3 h-3 rounded-full bg-red-500/50"></div>
                <div class="w-3 h-3 rounded-full bg-amber-500/50"></div>
                <div class="w-3 h-3 rounded-full bg-emerald-500/50"></div>
            </div>
            <span class="text-[10px] font-bold tracking-[0.2em] text-brand-muted uppercase">Premium Calc v2.0</span>
        </div>

        <!-- History Display -->
        <div class="mb-1 px-4 text-right h-6">
            <p id="history" class="text-brand-muted font-mono text-sm truncate history-scroll overflow-x-auto"></p>
        </div>

        <!-- Main Display -->
        <div class="display-container mb-8">
            <input 
                id="display" 
                type="text" 
                readonly 
                value="0"
                class="w-full bg-brand-dark/50 border-2 border-brand-accent/30 rounded-xl py-6 px-5 text-4xl font-mono font-bold text-right text-white shadow-inner focus:outline-none focus:border-brand-accent transition-colors"
            >
        </div>

        <!-- Button Grid -->
        <div class="grid grid-cols-4 gap-4">
            
            <!-- Row 1 -->
            <button onclick="clearDisplay()" class="calc-button bg-brand-clear hover:bg-red-500 text-white font-bold py-5 rounded-2xl flex items-center justify-center text-xl shadow-lg">C</button>
            <button onclick="append('(')" class="calc-button bg-brand-parentheses hover:bg-slate-500 text-white font-bold py-5 rounded-2xl flex items-center justify-center text-xl shadow-lg">(</button>
            <button onclick="append(')')" class="calc-button bg-brand-parentheses hover:bg-slate-500 text-white font-bold py-5 rounded-2xl flex items-center justify-center text-xl shadow-lg">)</button>
            <button onclick="append('/')" class="calc-button bg-brand-operator hover:bg-amber-400 text-white font-bold py-5 rounded-2xl flex items-center justify-center text-2xl shadow-lg">÷</button>

            <!-- Row 2 -->
            <button onclick="append('7')" class="calc-button bg-brand-number hover:bg-slate-600 text-white font-bold py-5 rounded-2xl flex items-center justify-center text-2xl shadow-lg">7</button>
            <button onclick="append('8')" class="calc-button bg-brand-number hover:bg-slate-600 text-white font-bold py-5 rounded-2xl flex items-center justify-center text-2xl shadow-lg">8</button>
            <button onclick="append('9')" class="calc-button bg-brand-number hover:bg-slate-600 text-white font-bold py-5 rounded-2xl flex items-center justify-center text-2xl shadow-lg">9</button>
            <button onclick="append('*')" class="calc-button bg-brand-operator hover:bg-amber-400 text-white font-bold py-5 rounded-2xl flex items-center justify-center text-2xl shadow-lg">×</button>

            <!-- Row 3 -->
            <button onclick="append('4')" class="calc-button bg-brand-number hover:bg-slate-600 text-white font-bold py-5 rounded-2xl flex items-center justify-center text-2xl shadow-lg">4</button>
            <button onclick="append('5')" class="calc-button bg-brand-number hover:bg-slate-600 text-white font-bold py-5 rounded-2xl flex items-center justify-center text-2xl shadow-lg">5</button>
            <button onclick="append('6')" class="calc-button bg-brand-number hover:bg-slate-600 text-white font-bold py-5 rounded-2xl flex items-center justify-center text-2xl shadow-lg">6</button>
            <button onclick="append('-')" class="calc-button bg-brand-operator hover:bg-amber-400 text-white font-bold py-5 rounded-2xl flex items-center justify-center text-2xl shadow-lg">−</button>

            <!-- Row 4 -->
            <button onclick="append('1')" class="calc-button bg-brand-number hover:bg-slate-600 text-white font-bold py-5 rounded-2xl flex items-center justify-center text-2xl shadow-lg">1</button>
            <button onclick="append('2')" class="calc-button bg-brand-number hover:bg-slate-600 text-white font-bold py-5 rounded-2xl flex items-center justify-center text-2xl shadow-lg">2</button>
            <button onclick="append('3')" class="calc-button bg-brand-number hover:bg-slate-600 text-white font-bold py-5 rounded-2xl flex items-center justify-center text-2xl shadow-lg">3</button>
            <button onclick="append('+')" class="calc-button bg-brand-operator hover:bg-amber-400 text-white font-bold py-5 rounded-2xl flex items-center justify-center text-2xl shadow-lg">+</button>

            <!-- Row 5 -->
            <button onclick="append('0')" class="calc-button col-span-2 bg-brand-number hover:bg-slate-600 text-white font-bold py-5 rounded-2xl flex items-center justify-center text-2xl shadow-lg">0</button>
            <button onclick="append('.')" class="calc-button bg-brand-number hover:bg-slate-600 text-white font-bold py-5 rounded-2xl flex items-center justify-center text-2xl shadow-lg">.</button>
            <button onclick="calculate()" class="calc-button bg-brand-accent hover:bg-blue-400 text-white font-bold py-5 rounded-2xl flex items-center justify-center text-2xl shadow-lg">=</button>

        </div>
    </div>

    <script>
        const display = document.getElementById('display');
        const history = document.getElementById('history');
        let currentExpression = '';
        let shouldReset = false;

        function updateDisplay() {
            if (currentExpression === '') {
                display.value = '0';
            } else {
                // Visual formatting for display (not for calculation)
                display.value = currentExpression.replace(/\*/g, '×').replace(/\//g, '÷');
            }
            
            // Auto-scroll to end of input
            display.scrollLeft = display.scrollWidth;
        }

        function append(value) {
            if (shouldReset) {
                if (['+', '-', '*', '/', ')'].includes(value)) {
                    shouldReset = false;
                } else {
                    currentExpression = '';
                    shouldReset = false;
                }
            }

            // Prevent multiple decimals in one number segment
            if (value === '.') {
                const parts = currentExpression.split(/[\+\-\*\/()]/);
                const lastPart = parts[parts.length - 1];
                if (lastPart.includes('.')) return;
            }

            // Limit input length
            if (currentExpression.length > 15) return;

            currentExpression += value;
            updateDisplay();
        }

        function clearDisplay() {
            currentExpression = '';
            history.innerText = '';
            updateDisplay();
        }

        function calculate() {
            if (currentExpression === '') return;

            try {
                // Check for division by zero
                if (currentExpression.includes('/0')) {
                    throw new Error('Div by Zero');
                }

                const result = eval(currentExpression);
                
                // Format the history text
                history.innerText = currentExpression.replace(/\*/g, '×').replace(/\//g, '÷') + ' =';
                
                // Format result to avoid huge decimals
                if (!Number.isInteger(result)) {
                    currentExpression = parseFloat(result.toFixed(8)).toString();
                } else {
                    currentExpression = result.toString();
                }
                
                shouldReset = true;
                updateDisplay();

                // Small feedback animation on calculation
                display.classList.add('scale-105');
                setTimeout(() => display.classList.remove('scale-105'), 100);

            } catch (error) {
                display.value = 'Error';
                display.classList.add('text-red-400');
                setTimeout(() => {
                    display.classList.remove('text-red-400');
                    clearDisplay();
                }, 1000);
            }
        }

        // Support for Keyboard Input
        document.addEventListener('keydown', (event) => {
            const key = event.key;
            if (/[0-9]/.test(key)) append(key);
            if (['+', '-', '*', '/', '(', ')', '.'].includes(key)) append(key);
            if (key === 'Enter' || key === '=') calculate();
            if (key === 'Escape' || key === 'c' || key === 'C') clearDisplay();
            if (key === 'Backspace') {
                currentExpression = currentExpression.slice(0, -1);
                updateDisplay();
            }
        });
    </script>
</body>
</html>
